(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{F4nq:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return r})),a.d(t,"default",(function(){return b}));var n=a("Fcif"),c=a("+I+c"),s=(a("mXGw"),a("/FXl")),o=a("TjRS"),r=(a("aD51"),{});void 0!==r&&r&&r===Object(r)&&Object.isExtensible(r)&&!r.hasOwnProperty("__filemeta")&&Object.defineProperty(r,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"pages/Batches/Overview.md"}});var i={_frontmatter:r},l=o.a;function b(e){var t=e.components,a=Object(c.a)(e,["components"]);return Object(s.b)(l,Object(n.a)({},i,a,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"batches"},"Batches"),Object(s.b)("p",null,"The Batches specifications describe how Batches are announced, stored and queried."),Object(s.b)("h2",{id:"file-format"},"File Format"),Object(s.b)("p",null,"The storage file format is ",Object(s.b)("a",{parentName:"p",href:"https://github.com/apache/parquet-format"},"Apache Parquet"),"."),Object(s.b)("h2",{id:"batch-announcements"},"Batch Announcements"),Object(s.b)("p",null,"DSNP Messages are queued where they go directly into one or more DSNP Message Type queues. At some point when a queue is filled, the messages are dequeued and written to a Batch files and stored. The details of each created batch are sent to IAnnounce. IAnnounce emits one message per Batch file. Please see ",Object(s.b)("a",{parentName:"p",href:"/Messages/Announce"},"Announce Message")," documentation for more details."),Object(s.b)("h2",{id:"batch-file-urls"},"Batch file URLs"),Object(s.b)("p",null,"The Batch file URL accepts different schemes to assist with knowing how to retrieve\nand query the file contents.  This allows adapters to be written to support different\nmethods of storage and retrieval."),Object(s.b)("p",null,"For HTTPS downloads, the SDK uses ",Object(s.b)("inlineCode",{parentName:"p"},"https")," as needed:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},"    queue.commit({scheme: 'https'})    \n")),Object(s.b)("p",null,"so that the URI emitted in the announcement would look something like:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},'   dsnpUri: "https://some.cloudhosting.com/cf9c0d7f801f56b634ae4cd3cf0b1aab9e11f2e00125dfb156baccc760417c41.parquet"\n')),Object(s.b)("p",null,"If it were for retrieval directly from Amazon S3, the SDK could use ",Object(s.b)("inlineCode",{parentName:"p"},"s3"),":"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},"    queue.commit({scheme: 's3'})    \n")),Object(s.b)("p",null,"Resulting in s3 instead of https in the announcement:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},'    dsnpUri: "s3://s3.us-west-2.amazonaws.com/mybucket/cf9c0d7f801f56b634ae4cd3cf0b1aab9e11f2e00125dfb156baccc760417c41.parquet"\n')),Object(s.b)("h2",{id:"queries"},"Queries"),Object(s.b)("p",null,"Querying a batch file is done via Bloom filters.  The query call is done through the SDK and\nconsists of a URL and an object of DSNP message column name/value pairs.  Example:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-typescript"},'    includes:boolean = sdk.batchIncludes(\n        "https://mycloudhost.com/cf9c0d7f801f56b634ae4cd3cf0b1aab9e11f2e00125dfb156baccc760417c41",\n        { fromAddress: "45cdf29f9d10e57a5c1d993745acd65315cabs2a3aa2b1b",\n          dsnpType: 2\n        }\n    )\n')),Object(s.b)("p",null,"Not all fields of a DSNP data type are added to the Bloom filters.  Generally speaking, content hashes and URIs are omitted, whereas any field containing a socialAddress or other meaningful text is included in the Bloom filter.  For more detail, see ",Object(s.b)("a",{parentName:"p",href:"/Messages/Overview"},"See the Messages Overview"),"."))}void 0!==b&&b&&b===Object(b)&&Object.isExtensible(b)&&!b.hasOwnProperty("__filemeta")&&Object.defineProperty(b,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"pages/Batches/Overview.md"}}),b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---pages-batches-overview-md-2cc1a0739b373d167ea9.js.map