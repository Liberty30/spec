_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"7ljp":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return m}));var n=a("q1tI"),r=a.n(n);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=r.a.createContext({}),p=function(e){var t=r.a.useContext(o),a=t;return e&&(a="function"===typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=p(e.components);return r.a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,b=e.parentName,o=c(e,["components","mdxType","originalType","parentName"]),s=p(a),u=n,m=s["".concat(b,".").concat(u)]||s[u]||d[u]||l;return a?r.a.createElement(m,i(i({ref:t},o),{},{components:a})):r.a.createElement(m,i({ref:t},o))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"===typeof e||n){var l=a.length,b=new Array(l);b[0]=u;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"===typeof e?e:n,b[1]=i;for(var o=2;o<l;o++)b[o]=a[o];return r.a.createElement.apply(null,b)}return r.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},EFfL:function(e,t,a){"use strict";a.r(t),a.d(t,"meta",(function(){return c})),a.d(t,"default",(function(){return p}));var n=a("cpVT"),r=a("dhJC"),l=(a("q1tI"),a("7ljp"));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"DSNP Messages",tableOfContents:{depth:0,children:[{depth:1,slug:"#dsnp-messages",title:"DSNP Messages",children:[{depth:2,slug:"#specification-status",title:"Specification Status"},{depth:2,slug:"#purpose",title:"Purpose"},{depth:2,slug:"#assumptions",title:"Assumptions"},{depth:2,slug:"#dsnp-message-formats",title:"DSNP Message Formats",children:[{depth:3,slug:"#variable-message-format",title:"Variable Message Format",children:[{depth:4,slug:"#some-other-options",title:"Some other options:"}]},{depth:3,slug:"#dsnp-messages-1",title:"DSNP Messages",children:[{depth:4,slug:"#broadcast",title:"Broadcast"},{depth:4,slug:"#drop",title:"Drop"},{depth:4,slug:"#graphchange",title:"GraphChange"},{depth:4,slug:"#keylist-privategraphkeylist-encryptionkeylist",title:"KeyList, PrivateGraphKeyList, EncryptionKeyList"},{depth:4,slug:"#inbox",title:"Inbox"},{depth:4,slug:"#encryptedinbox",title:"EncryptedInbox"},{depth:4,slug:"#reaction",title:"Reaction"}]},{depth:3,slug:"#possible-message-types",title:"Possible Message Types",children:[{depth:4,slug:"#profile",title:"Profile"},{depth:4,slug:"#private",title:"Private"},{depth:4,slug:"#privatebroadcast",title:"PrivateBroadcast"},{depth:4,slug:"#reply",title:"Reply"}]},{depth:3,slug:"#unified-message-format",title:"Unified Message Format"},{depth:3,slug:"#all-data-on-chain",title:"All data on chain"},{depth:3,slug:"#no-data-except-hashes-on-chain",title:"No data except hashes on chain"}]}]}]}},o={meta:c};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",i(i(i({},o),a),{},{components:t,mdxType:"MDXLayout"}),Object(l.b)("h1",i({},{id:"dsnp-messages"}),"DSNP Messages"),Object(l.b)("h2",i({},{id:"specification-status"}),"Specification Status"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"Version"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"Status"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"0.1"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"Proposed")))),Object(l.b)("h2",i({},{id:"purpose"}),"Purpose"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"Describe the form and content of DSNP Messages posted to the blockchain used for all Liberty Platform activities. Only some of these activities will have the full message posted to chain. Examples:",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Public messages (profile changes, public posts, reactions)"),Object(l.b)("li",{parentName:"ul"},"Direct messages between accounts (dead drop, inbox)"),Object(l.b)("li",{parentName:"ul"},"Key changes (private graph keylist, encryption keylist, public key rotation)"),Object(l.b)("li",{parentName:"ul"},"Graph changes (follow/unfollow)"))),Object(l.b)("li",{parentName:"ol"},"Specify an on-chain message format"),Object(l.b)("li",{parentName:"ol"},"Provide data size estimations"),Object(l.b)("li",{parentName:"ol"},"Facilitate use of SDK and interpretation of on-chain data")),Object(l.b)("h2",i({},{id:"assumptions"}),"Assumptions"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Chain messages are on Ethereum"),Object(l.b)("li",{parentName:"ul"},"Message data is posted via ",Object(l.b)("a",i({parentName:"li"},{href:"https://medium.com/mycrypto/understanding-event-logs-on-the-ethereum-blockchain-f4ae7ba50378"}),"Ethereum log events")),Object(l.b)("li",{parentName:"ul"},"Signature algorithm is ",Object(l.b)("a",i({parentName:"li"},{href:"https://en.bitcoin.it/wiki/Secp256k1"}),"secp256k1"),". This allows the use ",Object(l.b)("inlineCode",{parentName:"li"},"ecreover"),"\nto get public keys. A public key also need not be included in a log event for ease of validation."),Object(l.b)("li",{parentName:"ul"},"content hashes are created via the same ",Object(l.b)("a",i({parentName:"li"},{href:"https://en.wikipedia.org/wiki/SHA-3"}),"keccak-256 hashing algorithm")," used by Ethereum.  ")),Object(l.b)("h2",i({},{id:"dsnp-message-formats"}),"DSNP Message Formats"),Object(l.b)("p",null,"We have seriously considered two possibilities, a ",Object(l.b)("a",i({parentName:"p"},{href:"#Variable-Message-Format"}),"variable message format"),", and a ",Object(l.b)("a",i({parentName:"p"},{href:"#unified-message-format"}),"unified message format"),".  Others are listed at the end of this page."),Object(l.b)("h3",i({},{id:"variable-message-format"}),"Variable Message Format"),Object(l.b)("p",null,"This format is the current preference."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"All actions are posted to chain with some or all pertinent information about the action"),Object(l.b)("li",{parentName:"ul"},"Different information is posted depending on the action."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Advantages"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"can index all actions without requesting off-chain data"),Object(l.b)("li",{parentName:"ul"},"can validate most actions without requesting off-chain data"),Object(l.b)("li",{parentName:"ul"},"can archive some actions without requesting off-chain data"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Disadvantages"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"more data (likely more costly up front) than a simple URI")))),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Log message format ")," "),Object(l.b)("p",null,"This is what would be posted as a Log event in Ethereum:"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"topic"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"Ethereum log topic"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"fromAddress"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"social identity"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"dsnpType"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"DSNP message type"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"number/enum")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"dsnpData"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"serialized, possibly compressed message data"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")))),Object(l.b)("h4",i({},{id:"some-other-options"}),"Some other options:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Emit no topic, have a single contract that subscribers watch for events from.  Subscribers can perform filtering based on the ",Object(l.b)("inlineCode",{parentName:"li"},"dsnpTopic")," field."),Object(l.b)("li",{parentName:"ul"},"The topic is the dsnpType (possibly not an enum).  Subscribers could listen for desired topics.")),Object(l.b)("h3",i({},{id:"dsnp-messages-1"}),"DSNP Messages"),Object(l.b)("p",null,"These messages would be serialized, compressed where feasible, and emitted in the log event as the ",Object(l.b)("inlineCode",{parentName:"p"},"DSNPData")," field."),Object(l.b)("p",null,"For details on how messages are serialized, see ",Object(l.b)("a",i({parentName:"p"},{href:"/DSNP/DSNP-Message-Serialization"}),"DSNP Message Serialization")),Object(l.b)("h4",i({},{id:"broadcast"}),"Broadcast"),Object(l.b)("p",null,"a public post (was Announcement)"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"inReplyTo"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID replied to"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"keccak-256 hash of content stored at uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"content uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")))),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"NOTE")," If origin broadcasts and replies stay the same type, inReplyTo is allowed to be blank.  If replies are separated into their own type, the inReplyTo field here will be dropped."),Object(l.b)("h4",i({},{id:"drop"}),"Drop"),Object(l.b)("p",null,"a dead drop message"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"ddid"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"dead drop id"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"content uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"keccak-256 hash of content"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")))),Object(l.b)("h4",i({},{id:"graphchange"}),"GraphChange"),Object(l.b)("p",null,"a public follow/unfollow"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"address"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"social identity"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"actionType"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"follow/unfollow"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"number/enum")))),Object(l.b)("h4",i({},{id:"keylist-privategraphkeylist-encryptionkeylist"}),"KeyList, PrivateGraphKeyList, EncryptionKeyList"),Object(l.b)("p",null,"a keylist rotation"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"keylist"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"new list of valid keys"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"[bytes]")))),Object(l.b)("h4",i({},{id:"inbox"}),"Inbox"),Object(l.b)("p",null,"a direct message"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"keccak-256 hash of content"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"content uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")))),Object(l.b)("h4",i({},{id:"encryptedinbox"}),"EncryptedInbox"),Object(l.b)("p",null,"an encrypted direct message.  This describes the format once decrypted.  Possibly combine both of these and expect that all Inbox messages are encrypted."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"keccak-256 hash of content"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"content uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")))),Object(l.b)("h4",i({},{id:"reaction"}),"Reaction"),Object(l.b)("p",null,"a visual reply to a post"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"emoji"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"the encoded reaction"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"number")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"inReplyTo"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID the reaction is for"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")))),Object(l.b)("h3",i({},{id:"possible-message-types"}),"Possible Message Types"),Object(l.b)("h4",i({},{id:"profile"}),"Profile"),Object(l.b)("p",null,"a profile update such as name or icon change"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri for the profile data"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"keccak-256 hash of content at uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")))),Object(l.b)("h4",i({},{id:"private"}),"Private"),Object(l.b)("p",null,"An encrypted message of unknown type. See ",Object(l.b)("a",i({parentName:"p"},{href:"/DSNP/DSNP-Message-Types#private-messages"}),"DSNP Message Types: Private Messages")," for details."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"data"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"encrypted graph change data"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"keccak-256 hash of unencrypted content"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")))),Object(l.b)("h4",i({},{id:"privatebroadcast"}),"PrivateBroadcast"),Object(l.b)("p",null,"An encrypted Broadcast decipherable by specific accounts . This describes the format once decrypted."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"inReplyTo"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID replied to"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"messageID"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"keccak-256 hash of content stored at URI"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes32")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"content uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")))),Object(l.b)("h4",i({},{id:"reply"}),"Reply"),Object(l.b)("p",null,"This is a message type that would allow a Broadcast to drop the ",Object(l.b)("inlineCode",{parentName:"p"},"inReplyTo")," field.  In such case a Reply is exactly like Broadcast above, but ",Object(l.b)("inlineCode",{parentName:"p"},"inReplyTo")," is not allowed to be blank."),Object(l.b)("h3",i({},{id:"unified-message-format"}),"Unified Message Format"),Object(l.b)("p",null,"This is currently not the recommended solution, but is presented as a comparison."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"All actions are posted to the chain with some pertinent information about the action"),Object(l.b)("li",{parentName:"ul"},"The same information is posted regardless of action"),Object(l.b)("li",{parentName:"ul"},"The rest of the information for the action is stored off chain."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Advantages"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"less data on chain --\x3e lower up-front costs and lower node storage requirements"),Object(l.b)("li",{parentName:"ul"},'privacy management is easier -- for example, "right to be forgotten" is easier to comply with since\ndata is external, off-chain.'))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Disadvantages"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"indexing requires retrieving content @ uri"),Object(l.b)("li",{parentName:"ul"},"archiving requires retrieving more content @ uri"),Object(l.b)("li",{parentName:"ul"},"validation requires retrieving more content @ uri"),Object(l.b)("li",{parentName:"ul"},"cost savings may be minimal")))),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",i({parentName:"tr"},{align:null}),"field"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"description"),Object(l.b)("th",i({parentName:"tr"},{align:null}),"type"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"topic"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"Ethereum log topic"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"action type"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"the type of action"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"fromAddress"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"social identity"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"uri of stored action information"),Object(l.b)("td",i({parentName:"tr"},{align:null}),"bytes")))),Object(l.b)("h3",i({},{id:"all-data-on-chain"}),"All data on chain"),Object(l.b)("p",null,"One possibility is not to have any data stored off-chain; instead, even the ActivityPub content would be posted to chain.\nThe disadvantages far outweigh the advantages:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Advantages"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Validation, indexing, discovery are much easier"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"Disadvantages"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"This amount of data would rapidly slow down the network"),Object(l.b)("li",{parentName:"ul"},"The posting of illegal content could potentially shut down the network"),Object(l.b)("li",{parentName:"ul"},"Garbage collection, validation, privacy concerns, and dealing with illegal content become interdependent, and would pose conflicting interests."),Object(l.b)("li",{parentName:"ul"},"Would still need archive to store at least some content"),Object(l.b)("li",{parentName:"ul"},"Unknown, likely chilling effect on incentive models")))),Object(l.b)("h3",i({},{id:"no-data-except-hashes-on-chain"}),"No data except hashes on chain"),Object(l.b)("p",null,"Only hashes of the events are stored on chain; everything else is interpreted via API(s)"))}p.isMDXComponent=!0;var s={editThisPagePath:"pages/DSNP/DSNP-Messages.md"};for(var d in s)window[d]=s[d]},MaJj:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DSNP/DSNP-Messages",function(){return a("EFfL")}])},Qetd:function(e,t,a){"use strict";var n=Object.assign.bind(Object);e.exports=n,e.exports.default=e.exports},cpVT:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},dhJC:function(e,t,a){"use strict";function n(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}a.d(t,"a",(function(){return n}))}},[["MaJj",0,1]]]);